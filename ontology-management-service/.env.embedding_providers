# Vector Embedding Providers Configuration
# This file contains configuration for all 7 supported AI embedding providers
# Copy to .env and set your actual API keys

# === GENERAL EMBEDDING SETTINGS ===
USE_EMBEDDING_MS=false
EMBEDDING_SERVICE_ENDPOINT=embedding-service:50055
DEFAULT_EMBEDDING_PROVIDER=local_sentence_transformers
EMBEDDING_FALLBACK_ENABLED=true
EMBEDDING_CACHE_TTL=3600

# === OPENAI EMBEDDINGS ===
OPENAI_API_KEY=
OPENAI_EMBEDDING_MODEL=text-embedding-3-large
OPENAI_EMBEDDING_DIMENSIONS=3072
OPENAI_MAX_BATCH_SIZE=2048
OPENAI_MAX_TOKENS_PER_REQUEST=8191
OPENAI_RATE_LIMIT_RPM=10000

# === ANTHROPIC CLAUDE ===
# Note: Anthropic doesn't provide embeddings API directly
# This provider uses Claude for text analysis then local embeddings
ANTHROPIC_API_KEY=
ANTHROPIC_MODEL=claude-3-haiku-20240307
ANTHROPIC_EMBEDDING_DIMENSIONS=384
ANTHROPIC_MAX_BATCH_SIZE=20
ANTHROPIC_PROCESS_LONG_TEXTS=true

# === COHERE EMBEDDINGS ===
COHERE_API_KEY=
COHERE_EMBEDDING_MODEL=embed-english-v3.0
COHERE_EMBEDDING_DIMENSIONS=1024
COHERE_MAX_BATCH_SIZE=96
COHERE_INPUT_TYPE=search_document
COHERE_RATE_LIMIT_RPM=10000

# === HUGGING FACE ===
HUGGINGFACE_API_KEY=
HUGGINGFACE_API_BASE=https://api-inference.huggingface.co
HUGGINGFACE_MODEL=sentence-transformers/all-MiniLM-L6-v2
HUGGINGFACE_EMBEDDING_DIMENSIONS=384
HUGGINGFACE_MAX_BATCH_SIZE=100

# === AZURE OPENAI ===
AZURE_OPENAI_API_KEY=
AZURE_OPENAI_ENDPOINT=
AZURE_OPENAI_DEPLOYMENT_NAME=text-embedding-3-large
AZURE_OPENAI_API_VERSION=2024-02-01
AZURE_OPENAI_EMBEDDING_DIMENSIONS=3072
AZURE_OPENAI_MAX_BATCH_SIZE=2048

# === GOOGLE VERTEX AI ===
GOOGLE_APPLICATION_CREDENTIALS=
GOOGLE_PROJECT_ID=
GOOGLE_VERTEX_MODEL=textembedding-gecko@003
GOOGLE_VERTEX_EMBEDDING_DIMENSIONS=768
GOOGLE_VERTEX_LOCATION=us-central1

# === LOCAL SENTENCE TRANSFORMERS ===
LOCAL_EMBEDDING_MODEL=all-MiniLM-L6-v2
LOCAL_EMBEDDING_DIMENSIONS=384
LOCAL_DEVICE=auto
LOCAL_CACHE_DIR=./.cache/sentence_transformers

# === PROVIDER PRIORITIES ===
# Comma-separated list of providers in fallback order
EMBEDDING_PROVIDER_FALLBACK_ORDER=openai,azure_openai,cohere,huggingface,google_vertex,anthropic,local_sentence_transformers

# === PERFORMANCE SETTINGS ===
EMBEDDING_REQUEST_TIMEOUT=30
EMBEDDING_MAX_RETRIES=3
EMBEDDING_RETRY_DELAY=1
EMBEDDING_CONCURRENT_REQUESTS=10

# === MONITORING & METRICS ===
EMBEDDING_ENABLE_METRICS=true
EMBEDDING_LOG_LEVEL=INFO
EMBEDDING_TRACE_REQUESTS=false

# === VECTOR STORAGE ===
VECTOR_STORE_ENABLED=true
VECTOR_STORE_COLLECTION_PREFIX=oms_
VECTOR_STORE_INDEX_TYPE=flat
VECTOR_STORE_SIMILARITY_METRIC=cosine

# === RATE LIMITING ===
RATE_LIMIT_ENABLED=true
RATE_LIMIT_WINDOW_SECONDS=60
RATE_LIMIT_MAX_REQUESTS_PER_WINDOW=1000

# === CACHING ===
EMBEDDING_CACHE_ENABLED=true
EMBEDDING_CACHE_BACKEND=redis
EMBEDDING_CACHE_KEY_PREFIX=embedding:
EMBEDDING_CACHE_MAX_SIZE_MB=500