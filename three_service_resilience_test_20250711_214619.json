{
  "scenarios": [
    {
      "name": "Normal User Flow",
      "description": "유저 인증 → 스키마 조회 → 문서 CRUD → 감사 로그 조회",
      "steps": [
        {
          "step": "User Service Health Check",
          "status_code": 200,
          "success": true,
          "response_time": 0.027333736419677734,
          "details": {
            "status": "healthy",
            "service": "user-service",
            "version": "1.0.0"
          }
        },
        {
          "step": "OMS Schema List",
          "status_code": 200,
          "success": true,
          "response_time": 0.0799260139465332,
          "etag_header": "W/\"de613aba9c29-1\"",
          "cache_header": null
        },
        {
          "step": "OMS Document Creation",
          "status_code": 307,
          "success": false,
          "response_time": 0.0028307437896728516,
          "document_id": null
        },
        {
          "step": "Audit Service Health Check",
          "status_code": 200,
          "success": true,
          "response_time": 0.06330299377441406,
          "components": {
            "status": "degraded",
            "service": "audit-service",
            "version": "1.0.0",
            "timestamp": "2025-07-11T12:46:16.383826+00:00",
            "components": {
              "database": {
                "status": "healthy",
                "response_time_ms": 36.96,
                "connection_pool": "available"
              },
              "event_subscriber": {
                "status": "degraded",
                "is_running": false,
                "last_event": null
              },
              "siem_integration": {
                "status": "not_configured",
                "message": "SIEM integration not configured"
              },
              "file_storage": {
                "status": "healthy",
                "available_space_gb": 10,
                "total_space_gb": 95,
                "used_space_gb": 85
              },
              "redis": {
                "status": "unhealthy",
                "error": "Error 111 connecting to localhost:6379. 111.",
                "response_time_ms": 1.28
              }
            },
            "metrics": {
              "total_audit_logs": 0,
              "logs_last_24h": 0,
              "active_exports": 0,
              "scheduled_reports": 0,
              "error": "(sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedTableError'>: relation \"audit_logs\" does not exist\n[SQL: SELECT COUNT(*) FROM audit_logs]\n(Background on this error at: https://sqlalche.me/e/20/f405)"
            }
          }
        }
      ],
      "overall_success": true,
      "total_time": 0.1835160255432129,
      "resilience_activations": [
        {
          "mechanism": "E-Tag Cache Hit",
          "status": "activated",
          "response_time": 0.0030219554901123047
        }
      ]
    },
    {
      "name": "Circuit Breaker Activation",
      "description": "의도적인 에러 발생으로 서킷 브레이커 동작 확인",
      "steps": [
        {
          "step": "Error Request 1",
          "status_code": 404,
          "success": false,
          "response_time": 0.05591893196105957
        },
        {
          "step": "Error Request 2",
          "status_code": 404,
          "success": false,
          "response_time": 0.005692720413208008
        },
        {
          "step": "Error Request 3",
          "status_code": 404,
          "success": false,
          "response_time": 0.010337114334106445
        },
        {
          "step": "Normal Request After Circuit Open",
          "status_code": 200,
          "success": false,
          "response_time": 0.012727022171020508,
          "blocked_by_circuit": false
        }
      ],
      "overall_success": true,
      "total_time": 0.4038090705871582,
      "resilience_activations": [
        {
          "mechanism": "Circuit Breaker",
          "status": "opened",
          "trigger_count": 3,
          "response_time": 0.010593175888061523
        }
      ]
    },
    {
      "name": "Backpressure Handling",
      "description": "높은 부하 상황에서 백프레셔 메커니즘 확인",
      "steps": [
        {
          "step": "Concurrent Load Test",
          "total_requests": 50,
          "successful_requests": 50,
          "failed_requests": 0,
          "timeout_requests": 0,
          "avg_response_time": 1.5232993698120116,
          "p95_response_time": 2.0013980865478516,
          "success": true
        }
      ],
      "overall_success": true,
      "total_time": 2.2095470428466797,
      "resilience_activations": []
    },
    {
      "name": "Cross-Service Failure Simulation",
      "description": "한 서비스 장애 시 다른 서비스들의 리질리언스 확인",
      "steps": [
        {
          "step": "User Service Health Check",
          "status_code": 200,
          "success": true,
          "response_time": 0.009534835815429688,
          "service_status": {
            "status": "healthy",
            "service": "user-service",
            "version": "1.0.0"
          }
        },
        {
          "step": "OMS Health Check",
          "status_code": 200,
          "success": true,
          "response_time": 0.15975594520568848,
          "service_status": {
            "status": "healthy",
            "timestamp": "2025-07-11T12:46:19.176445",
            "response_time_ms": 151.8855094909668,
            "checks": {
              "database": {
                "status": true,
                "message": "Database connection successful",
                "response_time_ms": 147.63402938842773
              },
              "terminusdb": {
                "status": true,
                "message": "TerminusDB connection successful",
                "response_time_ms": 138.10276985168457
              },
              "redis": {
                "status": true,
                "message": "Redis connection successful",
                "response_time_ms": 108.05368423461914
              },
              "disk_space": {
                "status": true,
                "message": "11.1% free",
                "response_time_ms": null
              },
              "memory": {
                "status": true,
                "message": "22.6% used",
                "response_time_ms": null
              },
              "cpu": {
                "status": true,
                "message": "14.6% used",
                "response_time_ms": null
              }
            }
          }
        },
        {
          "step": "Audit Service Health Check",
          "status_code": 200,
          "success": true,
          "response_time": 0.0062329769134521484,
          "service_status": {
            "status": "healthy",
            "service": "audit-service",
            "version": "v2-test-applied",
            "timestamp": "2025-07-11T12:46:19.183689+00:00"
          }
        },
        {
          "step": "End-to-End Workflow Test",
          "schema_query": {
            "status_code": 200,
            "success": true,
            "etag_present": true
          },
          "response_time": 0.01034092903137207
        }
      ],
      "overall_success": true,
      "total_time": 0.19687390327453613,
      "resilience_activations": []
    }
  ],
  "overall_stats": {
    "total_tests": 13,
    "passed_tests": 7,
    "failed_tests": 6,
    "resilience_triggers": 2,
    "success_rate": 53.85
  },
  "performance_metrics": {
    "avg_response_time": 0.037,
    "p95_response_time": 0.16,
    "error_rate": 46.15
  }
}