# OMS Monolith Configuration

# Application
APP_NAME=oms-monolith
APP_VERSION=1.0.0
APP_ENV=production
APP_PORT=8000
APP_HOST=0.0.0.0

# API Gateway
API_GATEWAY_PORT=8090
API_RATE_LIMIT=100
API_RATE_LIMIT_WINDOW=60

# GraphQL
GRAPHQL_PORT=8006
GRAPHQL_WS_PORT=8004
GRAPHQL_PLAYGROUND=false

# Database
TERMINUSDB_URL=http://localhost:6363
TERMINUSDB_USER=admin
TERMINUSDB_PASSWORD=root
TERMINUSDB_KEY=root
TERMINUSDB_DATABASE=oms_production
TERMINUS_POOL_SIZE=20
TERMINUS_MAX_OVERFLOW=10
TERMINUS_POOL_TIMEOUT=30
TERMINUS_POOL_RECYCLE=3600

# Redis
REDIS_URL=redis://localhost:6379
REDIS_CLUSTER_NODES=localhost:6379,localhost:6380,localhost:6381
REDIS_PASSWORD=
REDIS_DB=0
REDIS_POOL_SIZE=50
REDIS_TIMEOUT=10

# NATS
NATS_URL=nats://localhost:4222
NATS_CLUSTER_ID=oms-cluster
NATS_CLIENT_ID=oms-monolith
NATS_DURABLE_NAME=oms-durable
NATS_JETSTREAM_ENABLED=true

# Authentication
JWT_SECRET_KEY=your-secret-key-here
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# Monitoring
PROMETHEUS_PORT=9090
JAEGER_AGENT_HOST=localhost
JAEGER_AGENT_PORT=6831
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317
OTEL_SERVICE_NAME=oms-monolith

# Logging
LOG_LEVEL=INFO
LOG_FORMAT=json

# Backup
BACKUP_ENABLED=true
BACKUP_INTERVAL=3600
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=oms-backups
BACKUP_S3_ENDPOINT=http://localhost:9000
BACKUP_S3_ACCESS_KEY=minioadmin
BACKUP_S3_SECRET_KEY=minioadmin

# Security
ENABLE_MTLS=false
MTLS_CERT_PATH=/certs/server.crt
MTLS_KEY_PATH=/certs/server.key
MTLS_CA_PATH=/certs/ca.crt

# Feature Flags
ENABLE_BRANCH_PROTECTION=true
ENABLE_AUDIT_LOGGING=true
ENABLE_SMART_CACHING=true
ENABLE_CONNECTION_POOLING=true
ENABLE_DISTRIBUTED_TRACING=true

# Performance
WORKER_COUNT=4
WORKER_CLASS=uvicorn.workers.UvicornWorker
WORKER_CONNECTIONS=1000
KEEPALIVE=5

# Circuit Breaker
CIRCUIT_BREAKER_FAILURE_THRESHOLD=5
CIRCUIT_BREAKER_RECOVERY_TIMEOUT=30
CIRCUIT_BREAKER_EXPECTED_EXCEPTION=TimeoutError

# Cache
CACHE_TTL=300
CACHE_MAX_SIZE=10000

# Event Processing
EVENT_BATCH_SIZE=100
EVENT_PROCESSING_INTERVAL=1
OUTBOX_POLLING_INTERVAL=5

# Validation
VALIDATION_TIMEOUT=30
VALIDATION_MAX_DEPTH=10

# Action Service
ACTION_EXECUTION_TIMEOUT=300
ACTION_MAX_RETRIES=3
ACTION_RETRY_DELAY=1
WEBHOOK_TIMEOUT=30

# Schema Service
SCHEMA_CACHE_TTL=600
SCHEMA_VERSION_LIMIT=1000

# Branch Service
BRANCH_MERGE_TIMEOUT=60
BRANCH_CONFLICT_RESOLUTION_STRATEGY=manual

# Backup Service
BACKUP_CHUNK_SIZE=1048576
BACKUP_COMPRESSION=gzip