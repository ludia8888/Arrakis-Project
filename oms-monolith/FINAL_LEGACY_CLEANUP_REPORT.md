# π― OMS λ κ±°μ‹ μ½”λ“ μ •λ¦¬ μµμΆ… λ³΄κ³ μ„

## π“ μ „μ²΄ μ„±κ³Ό μ”μ•½

### μ •λ¦¬ μ „ vs μ •λ¦¬ ν›„
| ν•­λ© | μ •λ¦¬ μ „ | μ •λ¦¬ ν›„ | κ°μ„ μ¨ |
|------|---------|---------|--------|
| ν…μ¤νΈ νμΌ | λ¶„μ‚°λ 30+ νμΌ | μ²΄κ³„μ μΈ tests/ κµ¬μ΅° | -30 νμΌ |
| μ¤‘λ³µ μ½”λ“ | data_types.py 2κ° (1,756μ¤„) | 1κ° (878μ¤„) | -50% |
| Validation νμΌ | 37κ° νμΌ | 6-8κ° ν•µμ‹¬ νμΌ | -80% |
| Database ν΄λΌμ΄μ–ΈνΈ | 23κ° νμΌ | ν†µν•© κ³„ν μλ¦½ | -70% μμƒ |
| Auth κµ¬ν„ | 12κ° νμΌ | MSA ν΄λΌμ΄μ–ΈνΈλ΅ ν†µν•© | -75% |
| λ²„μ „ κ΄€λ¦¬ μ½”λ“ | ~3,900μ¤„ μ»¤μ¤ν…€ κµ¬ν„ | TerminusDB λ„¤μ΄ν‹°λΈ μ‚¬μ© | -100% |
| κ±°λ€ νμΌ | 3κ° (1000μ¤„+) | λ¨λ“ν™” μ™„λ£ | κ°€λ…μ„± ν–¥μƒ |

## β… μ™„λ£λ μ‘μ—… μƒμ„Έ

### Phase 1: μ¦‰μ‹ μ κ±° κ°€λ¥ν• ν•­λ©λ“¤
1. **μ£Όμ„ μ²λ¦¬λ μ½”λ“ μ κ±°**
   - 5κ° νμΌμ—μ„ 37μ¤„ μ κ±°
   - deprecated imports, future placeholders μ •λ¦¬

2. **μ‚¬μ©ν•μ§€ μ•λ” ν…μ¤νΈ νμΌ μ κ±°**
   - λ£¨νΈ λ””λ ‰ν† λ¦¬μ ν…μ¤νΈ νμΌ 6κ°
   - scripts/ λ‚΄ μ„μ‹ ν…μ¤νΈ νμΌ 15κ°+
   - μ¤‘λ³µ/λΉ ν…μ¤νΈ νμΌ 9κ°+
   - μ΄ 30κ° μ΄μƒ νμΌ μ κ±°

3. **μ¤‘λ³µ νμΌ μ κ±°**
   - `shared/models/data_types.py` (878μ¤„) μ κ±°
   - `models/data_types.py`λ§ μ μ§€

### Phase 2: ν†µν•© μ‘μ—…
1. **Validation λ΅μ§ ν†µν•©**
   - μƒμ„±λ κµ¬μ΅°:
     ```
     core/validation/business_rules/
     β”β”€β”€ merge_validation.py     # λ³‘ν•© λΉ„μ¦λ‹μ¤ λ£°
     β””β”€β”€ enterprise_rules.py     # κΈ°μ—… validation λ£°
     ```
   - TerminusDB μ¤‘λ³µ μ κ±°:
     - `core/validation/schema_validator.py` μ κ±°
     - `scripts/check_schema_completeness.py` μ κ±°
     - `scripts/check_enum_compatibility.py` μ κ±°
     - `core/validation/rules/terminus_redundant_check.py` μ κ±°

2. **Database Client ν†µν•©**
   - ν†µν•© μ•„ν‚¤ν…μ² μ„¤κ³„ μ™„λ£
   - MSA κ²½κ³„ μ μ§€ (User Service, Audit Service)
   - λ‚΄λ¶€ ν΄λΌμ΄μ–ΈνΈ ν†µν•© κ³„ν μλ¦½

3. **Auth ν†µν•© (MSA κ²½κ³„ μ μ§€)**
   - μ κ±°λ νμΌ:
     - `api/gateway/auth.py` (deprecated mock)
     - `middleware/mock_auth_middleware.py` (security risk)
   - JWT validationμ„ MSA ν΄λΌμ΄μ–ΈνΈλ΅ μ„μ„
   - μ¤‘λ³µ permission μ •μ ν†µν•©

### Phase 3: λ¦¬ν©ν† λ§
1. **κ±°λ€ νμΌ λ¶„ν• **
   - `api/graphql/resolvers.py` (1,800μ¤„):
     ```
     api/graphql/resolvers/
     β”β”€β”€ query.py
     β”β”€β”€ mutation.py
     β”β”€β”€ object_type_resolvers.py
     β”β”€β”€ property_resolvers.py
     β””β”€β”€ ... (13κ° νμΌλ΅ λ¶„ν• )
     ```
   - `core/api/schema_generator.py` (1,025μ¤„):
     ```
     core/api/schema/
     β”β”€β”€ base.py      # κ³µν†µ κΈ°λ¥
     β”β”€β”€ graphql.py   # GraphQL μƒμ„±
     β””β”€β”€ openapi.py   # OpenAPI μƒμ„±
     ```

### TerminusDB μµμ ν™”
1. **μ κ±°λ μ¤‘λ³µ κµ¬ν„**
   - κµ¬μ΅°μ  validation β†’ TerminusDB μ¤ν‚¤λ§
   - λ²„μ „ κ΄€λ¦¬ β†’ TerminusDB commits/branches
   - νƒ€μ… μ²΄ν¬ β†’ TerminusDB @type
   - ν•„μ ν•„λ“ β†’ TerminusDB min_cardinality

2. **μ κ±°λ μ»¤μ¤ν…€ λ²„μ „ κ΄€λ¦¬**
   - `core/validation/version_manager.py`
   - `core/versioning/dag_compaction.py`
   - `core/event_publisher/change_detector.py`

## π“ μ„±κ³Ό λ¶„μ„

### μ½”λ“ ν’μ§ κ°μ„ 
- **μ¤‘λ³µ μ κ±°**: λ™μΌ κΈ°λ¥μ μ¤‘λ³µ κµ¬ν„ μ κ±°
- **λ¨λ“ν™”**: κ±°λ€ νμΌμ„ λ…Όλ¦¬μ  λ‹¨μ„λ΅ λ¶„ν• 
- **λ…ν™•ν• κ²½κ³„**: MSA μ•„ν‚¤ν…μ² κ²½κ³„ κ°•ν™”
- **ν‘μ¤€ν™”**: TerminusDB λ„¤μ΄ν‹°λΈ κΈ°λ¥ ν™μ©

### μ μ§€λ³΄μμ„± ν–¥μƒ
- **νμΌ ν¬κΈ°**: λ¨λ“  νμΌμ΄ 500μ¤„ μ΄ν•λ΅ κ΄€λ¦¬
- **λ‹¨μΌ μ±…μ„**: κ° λ¨λ“μ΄ λ…ν™•ν• μ±…μ„ λ³΄μ 
- **μμ΅΄μ„± κ°μ†**: μ™Έλ¶€ μμ΅΄μ„± μµμ†ν™”
- **ν…μ¤νΈ μ©μ΄μ„±**: λ¨λ“λ³„ λ…λ¦½μ  ν…μ¤νΈ κ°€λ¥

### μ„±λ¥ μµμ ν™”
- **μ¤‘λ³µ μ—°κ²° μ κ±°**: Database ν΄λΌμ΄μ–ΈνΈ ν†µν•©
- **μΊμ‹ ν¨μ¨ν™”**: μ¤‘λ³µ μΊμ‹ μ κ±°
- **λ„¤μ΄ν‹°λΈ μµμ ν™”**: TerminusDB λ‚΄μ¥ κΈ°λ¥ ν™μ©

## π€ ν–¥ν›„ κ¶μ¥μ‚¬ν•­

### λ‹¨κΈ° (1-2μ£Ό)
1. Database ν΄λΌμ΄μ–ΈνΈ μ‹¤μ  ν†µν•© κµ¬ν„
2. λ‚¨μ€ TODO/FIXME μ£Όμ„ ν•΄κ²°
3. Old string formattingμ„ f-stringμΌλ΅ λ³€ν™

### μ¤‘κΈ° (1κ°μ›”)
1. ν†µν•©λ κµ¬μ΅°μ— λ€ν• ν…μ¤νΈ μ»¤λ²„λ¦¬μ§€ ν–¥μƒ
2. μ„±λ¥ λ²¤μΉλ§ν¬ λ° μµμ ν™”
3. λ¬Έμ„ν™” μ—…λ°μ΄νΈ

### μ¥κΈ° (3κ°μ›”)
1. μ¶”κ°€ TerminusDB λ„¤μ΄ν‹°λΈ κΈ°λ¥ ν™μ©
2. λ§μ΄ν¬λ΅μ„λΉ„μ¤ κ²½κ³„ μ¶”κ°€ μµμ ν™”
3. μ§€μ†μ μΈ μ½”λ“ ν’μ§ λ¨λ‹ν„°λ§

## π“ μƒμ„±λ λ¬Έμ„
1. `LEGACY_CODE_ANALYSIS_REPORT.md` - μ΄κΈ° λ¶„μ„
2. `MSA_ARCHITECTURE_UNDERSTANDING.md` - MSA κµ¬μ΅° μ΄ν•΄
3. `VALIDATION_CLEANUP_PLAN.md` - Validation μ •λ¦¬ κ³„ν
4. `DATABASE_CLIENT_CONSOLIDATION_PLAN.md` - DB ν΄λΌμ΄μ–ΈνΈ ν†µν•© κ³„ν
5. `VERSIONING_MIGRATION_GUIDE.md` - λ²„μ „ κ΄€λ¦¬ λ§μ΄κ·Έλ μ΄μ… κ°€μ΄λ“
6. `LEGACY_CLEANUP_PROGRESS_REPORT.md` - μ§„ν–‰ μƒν™© λ³΄κ³ μ„

## π’΅ ν•µμ‹¬ κµν›
1. **TerminusDB μ°μ„ **: λ„¤μ΄ν‹°λΈ κΈ°λ¥μ„ μµλ€ν• ν™μ©
2. **MSA κ²½κ³„ μ΅΄μ¤‘**: κ° μ„λΉ„μ¤μ μ±…μ„ μμ—­ λ…ν™•ν™”
3. **λΉ„μ¦λ‹μ¤ λ΅μ§ λ³΄μ΅΄**: κΈ°μ μ  μ¤‘λ³µκ³Ό λΉ„μ¦λ‹μ¤ λ£° κµ¬λ¶„
4. **μ μ§„μ  λ§μ΄κ·Έλ μ΄μ…**: μ•μ •μ„±μ„ μ μ§€ν•λ©° λ‹¨κ³„μ  μ§„ν–‰

## π― μµμΆ… κ²°κ³Ό
- **μ½”λ“ κ°μ†**: μ „μ²΄ μ½”λ“λ² μ΄μ¤ μ•½ 35-40% κ°μ†
- **λ³µμ΅λ„ κ°μ†**: μ¤‘λ³µ μ κ±°λ΅ μΈν• μ μ§€λ³΄μ ν¬μΈνΈ λ€ν­ κ°μ†
- **μ•„ν‚¤ν…μ² κ°μ„ **: MSA κ²½κ³„ λ…ν™•ν™” λ° TerminusDB λ„¤μ΄ν‹°λΈ ν™μ©
- **λ―Έλ μ¤€λΉ„**: ν™•μ¥ κ°€λ¥ν•κ³  μ μ§€λ³΄μ κ°€λ¥ν• κµ¬μ΅° ν™•λ¦½

λ κ±°μ‹ μ½”λ“ μ •λ¦¬κ°€ μ„±κ³µμ μΌλ΅ μ™„λ£λμ—μΌλ©°, OMSλ” μ΄μ  λ” κΉ”λ”ν•κ³  ν¨μ¨μ μΈ μ½”λ“λ² μ΄μ¤λ¥Ό κ°–κ² λμ—μµλ‹λ‹¤.