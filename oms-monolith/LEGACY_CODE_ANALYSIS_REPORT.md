# ğŸš¨ OMS ë ˆê±°ì‹œ ì½”ë“œ ë¶„ì„ ë³´ê³ ì„œ

## ğŸ“Š ì£¼ìš” ë°œê²¬ì‚¬í•­

### 1. ğŸ—‚ï¸ ê±°ëŒ€ íŒŒì¼ë“¤ (>500 lines)
- **73ê°œ íŒŒì¼**ì´ 500ì¤„ ì´ìƒ
- ìµœëŒ€: `api/graphql/resolvers.py` (1,800ì¤„!)
- ë§ì€ íŒŒì¼ì´ 1,000ì¤„ ì´ìƒìœ¼ë¡œ ìœ ì§€ë³´ìˆ˜ ì–´ë ¤ì›€

### 2. ğŸ”„ ì¤‘ë³µ ê¸°ëŠ¥ (ê°€ì¥ ì‹¬ê°)

#### Validation ì¤‘ë³µ (37ê°œ íŒŒì¼!)
```
- analyze_validation_issue.py
- api/v1/validation_routes.py
- core/auth/resource_permission_checker.py
- core/health/health_checker.py
- core/traversal/merge_validator.py
... 32ê°œ ë”
```
**ë¬¸ì œ**: ê²€ì¦ ë¡œì§ì´ ê³³ê³³ì— í©ì–´ì ¸ ìˆìŒ

#### Database í´ë¼ì´ì–¸íŠ¸ ì¤‘ë³µ (23ê°œ íŒŒì¼!)
```
- database/clients/redis_ha_client.py
- database/clients/terminus_db.py
- core/audit/audit_database.py
- core/integrations/iam_service_client.py
... 19ê°œ ë”
```
**ë¬¸ì œ**: ê° ëª¨ë“ˆì´ ìì²´ DB ì—°ê²° êµ¬í˜„

#### Auth ì¤‘ë³µ (12ê°œ íŒŒì¼!)
```
- api/auth_examples.py
- api/gateway/auth.py
- api/graphql/auth.py
- core/auth.py
... 8ê°œ ë”
```
**ë¬¸ì œ**: ì¸ì¦ ë¡œì§ì´ ì—¬ëŸ¬ ê³³ì— ì¤‘ë³µ

### 3. ğŸ•°ï¸ ë ˆê±°ì‹œ íŒ¨í„´
- **Commented code**: ì£¼ì„ ì²˜ë¦¬ëœ ì½”ë“œ ë°©ì¹˜
- **Old string formatting**: `.format()` ì‚¬ìš© (f-string ëŒ€ì‹ )
- **Deprecated methods**: ì˜¤ë˜ëœ ë©”ì„œë“œ ì‚¬ìš©
- **TODO/FIXME**: 37ê°œì˜ ë¯¸í•´ê²° ì£¼ì„

### 4. ğŸ“ íŠ¹íˆ ë¬¸ì œê°€ ë˜ëŠ” í´ë”ë“¤

#### `/shared/models/` vs `/models/`
- `data_types.py`ê°€ **ë‘ ê³³ì— ë™ì¼í•˜ê²Œ ì¡´ì¬** (878ì¤„ì”©!)
- ì–´ëŠ ê²ƒì´ ì§„ì§œì¸ì§€ ë¶ˆëª…í™•

#### `/core/` í´ë”
- ë„ˆë¬´ ë§ì€ í•˜ìœ„ ëª¨ë“ˆ (30ê°œ+)
- ê° ëª¨ë“ˆì´ ë…ë¦½ì ìœ¼ë¡œ DB ì—°ê²°, ìºì‹œ, ê²€ì¦ êµ¬í˜„

## ğŸ¯ ì¦‰ì‹œ ì •ë¦¬ê°€ í•„ìš”í•œ ê²ƒë“¤

### 1. ì¤‘ë³µ íŒŒì¼ ì œê±°
```bash
# ë™ì¼í•œ íŒŒì¼ë“¤
- shared/models/data_types.py vs models/data_types.py
- ì—¬ëŸ¬ validation êµ¬í˜„ë“¤
- ì¤‘ë³µ DB í´ë¼ì´ì–¸íŠ¸ë“¤
```

### 2. ê±°ëŒ€ íŒŒì¼ ë¶„í• 
```bash
# 1000ì¤„ ì´ìƒ íŒŒì¼ë“¤
- api/graphql/resolvers.py (1800ì¤„) â†’ ê¸°ëŠ¥ë³„ ë¶„ë¦¬
- core/api/schema_generator.py (1025ì¤„) â†’ ëª¨ë“ˆí™”
- api/graphql/schema.py (973ì¤„) â†’ íƒ€ì…ë³„ ë¶„ë¦¬
```

### 3. í†µí•©ì´ í•„ìš”í•œ ê¸°ëŠ¥ë“¤
```bash
# Validation â†’ core/validation/ ìœ¼ë¡œ í†µí•©
# Database clients â†’ database/clients/ ë¡œ í†µí•©  
# Auth â†’ middleware/auth ë¡œ í†µí•©
# Cache â†’ shared/cache/ ë¡œ í†µí•©
```

## ğŸ› ï¸ ê¶Œì¥ ì •ë¦¬ ìˆœì„œ

### Phase 1: ì¦‰ì‹œ ì œê±° ê°€ëŠ¥
1. **Commented code** ì œê±°
2. **ì¤‘ë³µ íŒŒì¼** ì œê±° (data_types.py ë“±)
3. **ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” test íŒŒì¼ë“¤** ì •ë¦¬

### Phase 2: í†µí•© ì‘ì—…
1. **Validation** ë¡œì§ì„ core/validationìœ¼ë¡œ í†µí•©
2. **Database clients**ë¥¼ í•˜ë‚˜ë¡œ í†µí•©
3. **Auth** ë¡œì§ì„ middlewareë¡œ í†µí•©

### Phase 3: ë¦¬íŒ©í† ë§
1. **ê±°ëŒ€ íŒŒì¼ë“¤** ë¶„í• 
2. **Old string formatting**ì„ f-stringìœ¼ë¡œ ë³€ê²½
3. **TODO/FIXME** í•´ê²°

## ğŸ“ˆ ì˜ˆìƒ íš¨ê³¼

- **ì½”ë“œ 30-40% ê°ì†Œ** ì˜ˆìƒ
- **ìœ ì§€ë³´ìˆ˜ì„± ëŒ€í­ í–¥ìƒ**
- **ì„±ëŠ¥ ê°œì„ ** (ì¤‘ë³µ ì—°ê²°/ìºì‹œ ì œê±°)
- **ë²„ê·¸ ê°ì†Œ** (ì¼ê´€ëœ ê²€ì¦ ë¡œì§)

## ğŸš¨ ìœ„í—˜ ìš”ì†Œ

1. **data_types.py ì¤‘ë³µ**: ì–´ëŠ ê²ƒì´ ì‹¤ì œ ì‚¬ìš©ë˜ëŠ”ì§€ í™•ì¸ í•„ìš”
2. **DB í´ë¼ì´ì–¸íŠ¸ í†µí•©**: ê°ê° ë‹¤ë¥¸ ì„¤ì •ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŒ
3. **ê±°ëŒ€ íŒŒì¼ ë¶„í• **: ì˜ì¡´ì„± ë¬¸ì œ ë°œìƒ ê°€ëŠ¥

## ğŸ’¡ ë‹¤ìŒ ë‹¨ê³„

1. **ë°±ì—… ìƒì„±** (ì´ë¯¸ validation ë°±ì—…ì€ ìˆìŒ)
2. **ìš°ì„ ìˆœìœ„ ì„¤ì •**: ê°€ì¥ ì˜í–¥ì´ í° ì¤‘ë³µë¶€í„° ì œê±°
3. **ë‹¨ê³„ë³„ ì§„í–‰**: í•œ ë²ˆì— ë„ˆë¬´ ë§ì´ ë³€ê²½í•˜ì§€ ì•Šê¸°
4. **í…ŒìŠ¤íŠ¸ ê°•í™”**: ê° ë³€ê²½ í›„ ì² ì €í•œ í…ŒìŠ¤íŠ¸

ê°€ì¥ ì‹œê¸‰í•œ ê²ƒì€ **validation ì¤‘ë³µ (37ê°œ íŒŒì¼)**ê³¼ **data_types.py ì¤‘ë³µ**ì…ë‹ˆë‹¤!