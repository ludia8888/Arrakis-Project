{
  "timestamp": "2025-07-11T17:25:01.622164",
  "test_type": "real_msa_jwt_integration_validation",
  "summary": {
    "total_tests": 4,
    "successful_tests": 4,
    "success_rate": 100.0,
    "status": "완전 성공"
  },
  "duplicate_elimination": {
    "eliminated_functions": 12,
    "unified_to": "arrakis-common/auth/jwt_handler.py",
    "architecture_improvement": "MSA 전체 JWT 통합 완료"
  },
  "test_results": {
    "jwt_handler_test": {
      "success": true,
      "token": "eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJtc2EtdGVzdC11c2VyLTAwMSIsInVzZXJuYW1lIjoibXNhX3ZhbGlkYXRvciIsImVtYWlsIjoibXNhQHRlc3QuY29tIiwidHlwZSI6ImFjY2VzcyIsInJvbGVzIjpbInVzZXIiLCJvbnRvbG9neV9tYW5hZ2VyIl0sInBlcm1pc3Npb25zIjpbInJlYWQiLCJ3cml0ZSIsInNjaGVtYTpjcmVhdGUiXSwic2NvcGVzIjpbInJvbGU6dXNlciIsInJvbGU6b250b2xvZ3lfbWFuYWdlciIsInBlcm06cmVhZCIsInBlcm06d3JpdGUiLCJwZXJtOnNjaGVtYTpjcmVhdGUiXSwiZXhwIjoxNzUyMjU4MzAxLCJpYXQiOjE3NTIyNTQ3MDEsImlzcyI6InVzZXItc2VydmljZSIsImF1ZCI6Im9tcyJ9.EmZgqz2LnX2v-EOLPqrSU07snUm96bzylmVcMEIqC5KiMO7OgzVJnNpaGgmrKP6iQvOawqFNde4Lm2x4sUyfpFHGOBTOn5r9YNaM4nYut_EErUuS2fUkZFncKE61dKDaVtapFa61A0vSPmwDXoJt_DzPcSNoNb6ki7ETUcsPfOcLJeKTClvSnBKzdmwZZxB0sUV-Wtu_zWjRTe7xleTxqsMa3S1rUEwopf1oY-O4vkpHTviFjnjuC5K4PRw4pC_qYVJti7zvYkpFyZy3BCMNt6r0tYEE4X9aJIC3KEnKAcDiwZ7nxv6gFOGF4WasGYj7jsjCWmLEwDMpFxPeb6hhUg",
      "decoded": {
        "sub": "msa-test-user-001",
        "username": "msa_validator",
        "email": "msa@test.com",
        "type": "access",
        "roles": [
          "user",
          "ontology_manager"
        ],
        "permissions": [
          "read",
          "write",
          "schema:create"
        ],
        "scopes": [
          "role:user",
          "role:ontology_manager",
          "perm:read",
          "perm:write",
          "perm:schema:create"
        ],
        "exp": 1752258301,
        "iat": 1752254701,
        "iss": "user-service",
        "aud": "oms",
        "parsed_scopes": {
          "roles": [
            "user",
            "ontology_manager"
          ],
          "permissions": [
            "read",
            "write",
            "schema:create"
          ],
          "raw_scopes": [
            "role:user",
            "role:ontology_manager",
            "perm:read",
            "perm:write",
            "perm:schema:create"
          ]
        }
      },
      "scope_validation": true
    },
    "cross_service_test": {
      "success": true,
      "results": [
        {
          "service": "user-service",
          "token_created": true,
          "cross_validation": true,
          "token_length": 663
        },
        {
          "service": "audit-service",
          "token_created": true,
          "cross_validation": true,
          "token_length": 732
        },
        {
          "service": "ontology-management-service",
          "token_created": true,
          "cross_validation": true,
          "token_length": 775
        }
      ]
    },
    "duplicate_elimination_test": {
      "success": true,
      "eliminated_count": 12,
      "unified_class": "JWTHandler",
      "eliminated_functions": [
        "create_access_token (user-service)",
        "create_refresh_token (user-service)",
        "decode_token (user-service)",
        "verify_token (user-service)",
        "decode_token_with_scopes (user-service)",
        "validate_token_scopes (user-service)",
        "create_short_lived_token (user-service)",
        "get_jwt_secret (audit-service)",
        "get_jwt_algorithm (audit-service)",
        "get_jwt_issuer (audit-service)",
        "sample_jwt_token (audit-service)",
        "validate_jwt_secret (user-service)"
      ]
    },
    "production_validation_test": {
      "success": true,
      "security_tests": [
        {
          "test": "token_expiry",
          "passed": true
        },
        {
          "test": "invalid_format",
          "passed": true
        },
        {
          "test": "scope_enforcement",
          "passed": true
        },
        {
          "test": "token_type_check",
          "passed": true
        }
      ],
      "production_ready": true
    }
  },
  "validation_conclusion": {
    "msa_integration": true,
    "duplicate_code_eliminated": true,
    "production_ready": true,
    "cross_service_compatibility": true
  }
}